<!-- Sidebar Fragment -->
<div th:fragment="sidebar" xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
    <aside class="shadow-sm h-100 d-flex flex-column align-items-start rounded-end mt-4"
           style="min-height: 100vh; width: 220px; background: linear-gradient(to bottom, #4e73df, #224abe); padding: 1rem 0.75rem; color: white; border-top-right-radius: 1rem; border-bottom-right-radius: 1rem;">

        <!-- Sidebar Header -->
        <div class="w-100 text-center fw-bold mb-4" style="font-size: 1.4rem; color: #fff;">
            <i class="bi bi-shop me-1"></i>Temjai
        </div>

        <!-- Navigation Menu -->
        <nav class="nav flex-column small w-100">

            <a class="nav-link text-white py-2 px-3 rounded hover-effect [[${#httpServletRequest.requestURI.startsWith('/home')} ? 'active' : '']]"
               th:href="@{/home}">
                <i class="bi bi-house-door me-2"></i>Home
            </a>

            <a class="nav-link text-white py-2 px-3 rounded hover-effect [[${#httpServletRequest.requestURI.startsWith('/products')} ? 'active' : '']]"
               th:href="@{/products}"
               sec:authorize="hasAnyRole('USER','ADMIN')">
                <i class="bi bi-bag me-2"></i>Products
            </a>

            <a class="nav-link text-white py-2 px-3 rounded hover-effect [[${#httpServletRequest.requestURI.startsWith('/cart')} ? 'active' : '']]"
               th:href="@{/cart/view}"
               sec:authorize="hasAnyRole('USER','ADMIN')">
                <i class="bi bi-cart3 me-2"></i>Cart
            </a>

            <a class="nav-link text-white py-2 px-3 rounded hover-effect [[${#httpServletRequest.requestURI.startsWith('/orders')} ? 'active' : '']]"
               th:href="@{/orders/list}"
               sec:authorize="hasRole('USER')">
                <i class="bi bi-box-seam me-2"></i>Orders
            </a>

            <a class="nav-link text-white py-2 px-3 rounded hover-effect [[${#httpServletRequest.requestURI.startsWith('/admin/stock-view')} ? 'active' : '']]"
               th:href="@{/admin/stock-view}"
               sec:authorize="hasRole('ADMIN')">
                <i class="bi bi-archive me-2"></i>Stock
            </a>

            <a class="nav-link text-white py-2 px-3 rounded hover-effect [[${#httpServletRequest.requestURI.startsWith('/admin/products')} ? 'active' : '']]"
               th:href="@{/admin/products}"
               sec:authorize="hasRole('ADMIN')">
                <i class="bi bi-gear-wide-connected me-2"></i>Admin
            </a>

            <a class="nav-link text-white py-2 px-3 rounded hover-effect [[${#httpServletRequest.requestURI.startsWith('/profile')} ? 'active' : '']]"
               th:href="@{/profile}"
               sec:authorize="hasAnyRole('USER','ADMIN')">
                <i class="bi bi-person-circle me-2"></i>Profile
            </a>

            <a class="nav-link text-danger bg-white py-2 px-3 rounded hover-effect"
               th:href="@{/logout}"
               sec:authorize="hasAnyRole('USER','ADMIN')">
                <i class="bi bi-box-arrow-right me-2"></i>Logout
            </a>

            <a class="nav-link text-white py-2 px-3 rounded hover-effect [[${#httpServletRequest.requestURI.startsWith('/register')} ? 'active' : '']]"
               th:href="@{/register}"
               sec:authorize="isAnonymous()">
                <i class="bi bi-pencil-square me-2"></i>Register
            </a>

            <a class="nav-link text-white py-2 px-3 rounded hover-effect [[${#httpServletRequest.requestURI.startsWith('/login')} ? 'active' : '']]"
               th:href="@{/login}"
               sec:authorize="isAnonymous()">
                <i class="bi bi-lock me-2"></i>Login
            </a>
        </nav>
    </aside>
</div>